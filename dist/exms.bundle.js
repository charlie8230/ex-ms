!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.EXMS=n():t.EXMS=n()}(this,function(){return function(t){function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}var e={};return n.m=t,n.c=e,n.i=function(t){return t},n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},n.p="",n(n.s=19)}([function(t,n,e){"use strict";function r(){p=!1}function o(t){if(!t)return void(a!==y&&(a=y,r()));if(t!==a){if(t.length!==y.length)throw new Error("Custom alphabet for shortid must be "+y.length+" unique characters. You submitted "+t.length+" characters: "+t);var n=t.split("").filter(function(t,n,e){return n!==e.lastIndexOf(t)});if(n.length)throw new Error("Custom alphabet for shortid must be "+y.length+" unique characters. These characters were not unique: "+n.join(", "));a=t,r()}}function u(t){return o(t),a}function i(t){d.seed(t),l!==t&&(r(),l=t)}function c(){a||o(y);for(var t,n=a.split(""),e=[],r=d.nextValue();n.length>0;)r=d.nextValue(),t=Math.floor(r*n.length),e.push(n.splice(t,1)[0]);return e.join("")}function f(){return p?p:p=c()}function s(t){var n=f();return n[t]}var a,l,p,d=e(14),y="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-";t.exports={characters:u,seed:i,lookup:s,shuffled:f}},function(t,n,e){"use strict";function r(t,n){for(var e,r=0,u="";!e;)u+=t(n>>4*r&15|o()),e=n<Math.pow(16,r+1),r++;return u}var o=e(13);t.exports=r},function(t,n,e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var u=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),i=e(7),c=r(i),f=(0,c.default)(),s=Object.assign({},f),a=function(){function t(){o(this,t)}return u(t,[{key:"on",value:function(t,n){f.on(t,n)}},{key:"off",value:function(t,n){f.off(t,n)}},{key:"emit",value:function(t,n){f.emit(t,n)}},{key:"trigger",value:function(){for(var t=arguments.length,n=Array(t),e=0;e<t;e++)n[e]=arguments[e];this.emit(n)}}]),t}();t.exports={API:a,emitterAPI:s}},function(t,n,e){"use strict";var r=e(4),o=r.getQueryVariable,u=o("debug")||o("debugger"),i=u?console:function(){},c=i.log=u?console.log:function(){};t.exports={logger:i,log:c,debugMode:u}},function(t,n,e){"use strict";function r(t){for(var n=window.location.search.substring(1),e=n.split("&"),r=0;r<e.length;r++){var o=e[r].split("=");if(o[0]==t)return o[1]}return!1}var o=e(8);t.exports={shortid:o,getQueryVariable:r}},function(t,n,e){"use strict";var r,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};(function(){var u=function(t,n){switch(t){case 0:return function(){return n.apply(this,arguments)};case 1:return function(t){return n.apply(this,arguments)};case 2:return function(t,e){return n.apply(this,arguments)};case 3:return function(t,e,r){return n.apply(this,arguments)};case 4:return function(t,e,r,o){return n.apply(this,arguments)};case 5:return function(t,e,r,o,u){return n.apply(this,arguments)};case 6:return function(t,e,r,o,u,i){return n.apply(this,arguments)};case 7:return function(t,e,r,o,u,i,c){return n.apply(this,arguments)};case 8:return function(t,e,r,o,u,i,c,f){return n.apply(this,arguments)};case 9:return function(t,e,r,o,u,i,c,f,s){return n.apply(this,arguments)};case 10:return function(t,e,r,o,u,i,c,f,s,a){return n.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}},i=function(t){return{"@@transducer/value":t,"@@transducer/reduced":!0}},c=function(t,n){return Object.prototype.hasOwnProperty.call(n,t)},f=function(){var t=Object.prototype.toString;return"[object Arguments]"===t.call(arguments)?function(n){return"[object Arguments]"===t.call(n)}:function(t){return c("callee",t)}}(),s=Array.isArray||function(t){return null!=t&&t.length>=0&&"[object Array]"===Object.prototype.toString.call(t)},a=function(t){return null!=t&&"object"===("undefined"==typeof t?"undefined":o(t))&&t["@@functional/placeholder"]===!0},l=function(t){return"[object String]"===Object.prototype.toString.call(t)},p=function(t){return"function"==typeof t["@@transducer/step"]},d=function(t,n){for(var e=0,r=n.length,o=Array(r);e<r;)o[e]=t(n[e]),e+=1;return o},y=function(t,n){return function(){return n.call(this,t.apply(this,arguments))}},h={init:function(){return this.xf["@@transducer/init"]()},result:function(t){return this.xf["@@transducer/result"](t)}},g=function(){function t(t){this.f=t}return t.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},t.prototype["@@transducer/result"]=function(t){return t},t.prototype["@@transducer/step"]=function(t,n){return this.f(t,n)},function(n){return new t(n)}}(),v=function(t,n){return function(){var e=arguments.length;if(0===e)return n();var r=arguments[e-1];return s(r)||"function"!=typeof r[t]?n.apply(this,arguments):r[t].apply(r,Array.prototype.slice.call(arguments,0,e-1))}},b=function(t){return function n(e){return 0===arguments.length||a(e)?n:t.apply(this,arguments)}},m=function(t){return function n(e,r){switch(arguments.length){case 0:return n;case 1:return a(e)?n:b(function(n){return t(e,n)});default:return a(e)&&a(r)?n:a(e)?b(function(n){return t(n,r)}):a(r)?b(function(n){return t(e,n)}):t(e,r)}}},w=function(t){return function n(e,r,o){switch(arguments.length){case 0:return n;case 1:return a(e)?n:m(function(n,r){return t(e,n,r)});case 2:return a(e)&&a(r)?n:a(e)?m(function(n,e){return t(n,r,e)}):a(r)?m(function(n,r){return t(e,n,r)}):b(function(n){return t(e,r,n)});default:return a(e)&&a(r)&&a(o)?n:a(e)&&a(r)?m(function(n,e){return t(n,e,o)}):a(e)&&a(o)?m(function(n,e){return t(n,r,e)}):a(r)&&a(o)?m(function(n,r){return t(e,n,r)}):a(e)?b(function(n){return t(n,r,o)}):a(r)?b(function(n){return t(e,n,o)}):a(o)?b(function(n){return t(e,r,n)}):t(e,r,o)}}},S=function t(n,e,r){return function(){for(var o=[],i=0,c=n,f=0;f<e.length||i<arguments.length;){var s;f<e.length&&(!a(e[f])||i>=arguments.length)?s=e[f]:(s=arguments[i],i+=1),o[f]=s,a(s)||(c-=1),f+=1}return c<=0?r.apply(this,o):u(c,t(n,o,r))}},j=function(t,n,e){return function(){if(0===arguments.length)return e();var r=Array.prototype.slice.call(arguments,0),o=r.pop();if(!s(o)){for(var u=0;u<t.length;){if("function"==typeof o[t[u]])return o[t[u]].apply(o,r);u+=1}if(p(o)){var i=n.apply(null,r);return i(o)}}return e.apply(this,arguments)}},x=function(){function t(t,n){this.xf=n,this.f=t}return t.prototype["@@transducer/init"]=h.init,t.prototype["@@transducer/result"]=h.result,t.prototype["@@transducer/step"]=function(t,n){return this.xf["@@transducer/step"](t,this.f(n))},m(function(n,e){return new t(n,e)})}(),O=b(function(t){return function(){return t}}),k=w(function(t,n,e){var r={};for(var o in e)r[o]=e[o];return r[t]=n,r}),E=m(function(t,n){return u(t.length,function(){return t.apply(n,arguments)})}),A=m(function(t,n){return 1===t?b(n):u(t,S(t,[],n))}),M=b(function(t){return!!s(t)||!!t&&("object"===("undefined"==typeof t?"undefined":o(t))&&(!l(t)&&(1===t.nodeType?!!t.length:0===t.length||t.length>0&&(t.hasOwnProperty(0)&&t.hasOwnProperty(t.length-1)))))}),I=function(){var t=!{toString:null}.propertyIsEnumerable("toString"),n=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],e=function(){return arguments.propertyIsEnumerable("length")}(),r=function(t,n){for(var e=0;e<t.length;){if(t[e]===n)return!0;e+=1}return!1};return b("function"!=typeof Object.keys||e?function(o){if(Object(o)!==o)return[];var u,i,s=[],a=e&&f(o);for(u in o)!c(u,o)||a&&"length"===u||(s[s.length]=u);if(t)for(i=n.length-1;i>=0;)u=n[i],c(u,o)&&!r(s,u)&&(s[s.length]=u),i-=1;return s}:function(t){return Object(t)!==t?[]:Object.keys(t)})}(),_=function(){var t=function t(n){return{value:n,map:function(e){return t(e(n))}}};return w(function(n,e,r){return n(function(n){return t(e(n))})(r).value})}(),R=m(function(t,n){return n[t]}),P=b(function(t){return l(t)?t.split("").reverse().join(""):Array.prototype.slice.call(t,0).reverse()}),T=w(function(t,n,e){return _(t,O(n),e)}),C=w(v("slice",function(t,n,e){return Array.prototype.slice.call(e,t,n)})),V=b(v("tail",C(1,1/0))),D=w(function(t,n,e){return t(e)?n(e):e}),F=function(t){return function n(e){for(var r,o,u,i=[],c=0,f=e.length;c<f;){if(M(e[c]))for(r=t?n(e[c]):e[c],u=0,o=r.length;u<o;)i[i.length]=r[u],u+=1;else i[i.length]=e[c];c+=1}return i}},G=function(){function t(t,n,e){for(var r=0,o=e.length;r<o;){if(n=t["@@transducer/step"](n,e[r]),n&&n["@@transducer/reduced"]){n=n["@@transducer/value"];break}r+=1}return t["@@transducer/result"](n)}function n(t,n,e){for(var r=e.next();!r.done;){if(n=t["@@transducer/step"](n,r.value),n&&n["@@transducer/reduced"]){n=n["@@transducer/value"];break}r=e.next()}return t["@@transducer/result"](n)}function e(t,n,e){return t["@@transducer/result"](e.reduce(E(t["@@transducer/step"],t),n))}var r="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator";return function(o,u,i){if("function"==typeof o&&(o=g(o)),M(i))return t(o,u,i);if("function"==typeof i.reduce)return e(o,u,i);if(null!=i[r])return n(o,u,i[r]());if("function"==typeof i.next)return n(o,u,i);throw new TypeError("reduce: list must be array or iterable")}}(),q=b(function(t){return A(t.length,t)}),X=m(j(["map"],x,function(t,n){switch(Object.prototype.toString.call(n)){case"[object Function]":return A(n.length,function(){return t.call(this,n.apply(this,arguments))});case"[object Object]":return G(function(e,r){return e[r]=t(n[r]),e},{},I(n));default:return d(t,n)}})),N=w(G),K=function(){var t=function(t){return{"@@transducer/init":h.init,"@@transducer/result":function(n){return t["@@transducer/result"](n)},"@@transducer/step":function(n,e){var r=t["@@transducer/step"](n,e);return r["@@transducer/reduced"]?i(r):r}}};return function(n){var e=t(n);return{"@@transducer/init":h.init,"@@transducer/result":function(t){return e["@@transducer/result"](t)},"@@transducer/step":function(t,n){return M(n)?G(e,t,n):G(e,t,[n])}}}}(),L=m(function(t,n){return X(t,K(n))}),Q=m(j(["chain"],L,function(t,n){return"function"==typeof n?function(e){return t(n(e))(e)}:F(!1)(X(t,n))})),U=m(function(t,n){return function(e){return function(r){return X(function(t){return n(t,r)},e(t(r)))}}}),W=b(function(t){return U(R(t),k(t))}),Y=function(){if(0===arguments.length)throw new Error("pipe requires at least one argument");return u(arguments[0].length,N(y,arguments[0],V(arguments)))},z=function(){if(0===arguments.length)throw new Error("compose requires at least one argument");return Y.apply(this,P(arguments))},B={chain:Q,compose:z,curry:q,lens:U,lensProp:W,pipe:Y,set:T,when:D};"object"===o(n)?t.exports=B:(r=function(){return B}.call(n,e,n,t),!(void 0!==r&&(t.exports=r)))}).call(void 0)},function(t,n,e){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=e(5),u=e(4),i=e(17),c=e(18),f=c.stackState,s=c.stackFunctions,a=e(16),l=e(2),p=l.emitterAPI,d=e(3),y=d.logger,h=d.log,g=d.debugMode;window.R=o;var v={globalConfig:new i({debugger:g,initCompleted:!1,moduleSelector:"[data-module]"}),get stacks(){return f&&f.stack||{}},set stacks(t){f.stack=t},get config(){return this.globalConfig.config},set config(t){this.globalConfig.set(t)},init:function(t){this.globalConfig.set(t)},logger:y,getElements:function(){return document.querySelectorAll(this.config.moduleSelector)},getModuleName:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",e=n.replace(/[\[\]]/g,"");return t?t&&t.attributes&&t.attributes[e]&&t.attributes[e].value:t},getModule:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(this.stacks.modules||[]).reduce(function(n,e){return e.name===t&&e||n})},addService:s.addToStack("services"),addModule:s.addToStack("modules"),startAll:function(){var t=this.stacks.moduleRefs;t.forEach(function(t){t&&t.fn&&t.fn.init&&t.fn.init()})},getService:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=this.stacks.services.reduce(function(t,e){return e.name===n&&e||t}),o=void 0;if(e){var u=function(){if("api"in e)return h("Got ",e.name," already"),{v:e.api};var n=e.name,r=t.stacks.serviceInit;if(r.length>5)return h("too deep"),{v:void 0};var u=r.some(function(t){return t.name===n});return u?(h("Found a circular ref!",n),{v:void 0}):(h("No circular refs",n),t.stacks={type:"serviceInitAdd",name:n},o=e.fn(t),t.stacks={type:"serviceInitDone",name:n},h(t.stacks.serviceInit),Object.assign(e,{api:o,type:"services"}),{v:o})}();if("object"===("undefined"==typeof u?"undefined":r(u)))return u.v}},asSubModule:function(){},runStart:function(){this.setupModules(),this.startAll()},startModules:function(t){var n=this;t?this.on(t,function(){n.runStart()}):this.runStart()},setupModules:function(){var t=this;if(this.config.initCompleted)return void h("Global Init already done - exit!");var n=this.getElements();n.forEach(function(n){var e=t.getModuleName(n,t.config.moduleSelector);if(e){var r=t.getModule(e),o=new a(n,t,u);if(r&&r.fn){var i=r.fn(o);"undefined"!=typeof i&&(t.stacks={type:"moduleRefs",name:e,fn:i})}}}),this.config={initCompleted:!0}}};Object.assign(v,p),t.exports=v},function(t,n,e){"use strict";function r(t){function n(n){var e=n.toLowerCase();return t[e]||(t[e]=[])}return t=t||{},{on:function(t,e){n(t).push(e)},off:function(t,e){var r=n(t),o=r.indexOf(e);~o&&r.splice(o,1)},emit:function(t,e){n("*").concat(n(t)).forEach(function(t){t(e)})}}}t.exports=r},function(t,n,e){"use strict";t.exports=e(11)},function(t,n,e){"use strict";function r(t){var n="",e=Math.floor(.001*(Date.now()-f));return e===u?o++:(o=0,u=e),n+=i(c.lookup,s),n+=i(c.lookup,t),o>0&&(n+=i(c.lookup,o)),n+=i(c.lookup,e)}var o,u,i=e(1),c=e(0),f=1459707606518,s=6;t.exports=r},function(t,n,e){"use strict";function r(t){var n=o.shuffled();return{version:15&n.indexOf(t.substr(0,1)),worker:15&n.indexOf(t.substr(1,1))}}var o=e(0);t.exports=r},function(t,n,e){"use strict";function r(n){return c.seed(n),t.exports}function o(n){return l=n,t.exports}function u(t){return void 0!==t&&c.characters(t),c.shuffled()}function i(){return s(l)}var c=e(0),f=(e(1),e(10)),s=e(9),a=e(12),l=e(15)||0;t.exports=i,t.exports.generate=i,t.exports.seed=r,t.exports.worker=o,t.exports.characters=u,t.exports.decode=f,t.exports.isValid=a},function(t,n,e){"use strict";function r(t){if(!t||"string"!=typeof t||t.length<6)return!1;for(var n=o.characters(),e=t.length,r=0;r<e;r++)if(n.indexOf(t[r])===-1)return!1;return!0}var o=e(0);t.exports=r},function(t,n,e){"use strict";function r(){if(!u||!u.getRandomValues)return 48&Math.floor(256*Math.random());var t=new Uint8Array(1);return u.getRandomValues(t),48&t[0]}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u="object"===("undefined"==typeof window?"undefined":o(window))&&(window.crypto||window.msCrypto);t.exports=r},function(t,n,e){"use strict";function r(){return u=(9301*u+49297)%233280,u/233280}function o(t){u=t}var u=1;t.exports={nextValue:r,seed:o}},function(t,n,e){"use strict";t.exports=0},function(t,n,e){"use strict";function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function o(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?t:n}function u(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}var i=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),c=e(2),f=c.API,s=(c.methods,e(3)),a=(s.logger,s.debugMode,function(t){function n(t,e,u){r(this,n);var i=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return i.el=i.elem=t,i._id=u.shortid.generate(),i.el.id="module-"+i._id,i.status="created",i.getService=e.getService.bind(e),i.getSubModule=e.asSubModule.bind(e),i}return u(n,t),i(n,[{key:"destroy",value:function(){this.el=null,this.status=null}}]),n}(f));t.exports=a},function(t,n,e){"use strict";function r(t){return t?Object.assign({},c,t):{}}function o(t){c=r(t)}function u(){return c}function i(){function t(t){o(t)}function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,n=u();return t?n[t]:n}var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t(e),{get:n,set:t,set config(t){o(t)},get config(){return u()}}}var c={};t.exports=i},function(t,n,e){"use strict";function r(t){if(Array.isArray(t)){for(var n=0,e=Array(t.length);n<t.length;n++)e[n]=t[n];return e}return Array.from(t)}function o(){return Object.assign({},{services:[],serviceInit:[],modules:[],moduleRefs:[],plugins:[]})}function u(t,n,e,r){var o="REGISTER";switch(e){case"serviceInitDone":console.log("Removing Service",t),o="REMOVE_FROM_SVC_STACK",e="serviceInit";break;case"serviceInitAdd":console.log("adding service",t),o="REGISTER",e="serviceInit";break;case"services":o="undefined"==typeof r?"REGISTER":"ADD_API"}return{type:o,itemType:e,name:t,fn:n}}function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1];switch(n.type){case"REGISTER":return{name:n.name,fn:n.fn,itemType:n.itemType};case"ADD_API":return Object.assign({},t,{api:n.api});default:return t}}function c(t,n){var e=n.itemType,o=n.type,u=n.name,c={};if(!e)return t;switch(o){case"REMOVE_FROM_SVC_STACK":return c.serviceInit=(t.serviceInit||[]).filter(function(t){return t.name!==u}),Object.assign({},t,c);case"ADD_API":return c[e]=[(t[e]||[]).map(function(t){return t.name===u?i(t,n):t})],Object.assign({},t,c);case"REGISTER":return c[e]=[].concat(r(t[e]||[]),[i(void 0,n)]),Object.assign({},t,c);default:return t}}function f(t){var n=t.name,e=t.fn,r=t.type,o=t.api,i=u(n,e,r,o);p=c(p,i)}function s(t,n,e){d.stack={type:t,name:n,fn:e}}function a(){return l.curry(s)}var l=e(5),p=o(),d={set stack(t){f(t||{})},get stack(){var t=getState()||{},n=t.stack;return n}};t.exports={stackState:d,stackFunctions:{updateStack:s,addToStack:a}}},function(t,n,e){"use strict";var r=e(6),o=void 0,u=Object.assign(r,{noConflict:function(){return window.EXMS=o,this}});window.EXMS&&(o=window.EXMS),t.exports=u}])});