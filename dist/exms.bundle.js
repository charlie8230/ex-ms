!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.EXMS=e():t.EXMS=e()}(this,function(){return function(t){function e(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=17)}([function(t,e,n){"use strict";function o(){d=!1}function r(t){if(!t)return void(f!==p&&(f=p,o()));if(t!==f){if(t.length!==p.length)throw new Error("Custom alphabet for shortid must be "+p.length+" unique characters. You submitted "+t.length+" characters: "+t);var e=t.split("").filter(function(t,e,n){return e!==n.lastIndexOf(t)});if(e.length)throw new Error("Custom alphabet for shortid must be "+p.length+" unique characters. These characters were not unique: "+e.join(", "));f=t,o()}}function i(t){return r(t),f}function u(t){g.seed(t),l!==t&&(o(),l=t)}function s(){f||r(p);for(var t,e=f.split(""),n=[],o=g.nextValue();e.length>0;)o=g.nextValue(),t=Math.floor(o*e.length),n.push(e.splice(t,1)[0]);return n.join("")}function c(){return d?d:d=s()}function a(t){var e=c();return e[t]}var f,l,d,g=n(13),p="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-";t.exports={characters:i,seed:u,lookup:a,shuffled:c}},function(t,e,n){"use strict";function o(t){for(var e=window.location.search.substring(1),n=e.split("&"),o=0;o<n.length;o++){var r=n[o].split("=");if(r[0]==t)return r[1]}return!1}function r(t){return function(e){return t.bind(this,e)}}var i=n(7);t.exports={shortid:i,getQueryVariable:o,basic_curry:r}},function(t,e,n){"use strict";function o(t,e){for(var n,o=0,i="";!n;)i+=t(e>>4*o&15|r()),n=e<Math.pow(16,o+1),o++;return i}var r=n(12);t.exports=o},function(t,e,n){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=n(6),i=n(1),u=i.basic_curry,s=r(),c=Object.assign({onmessage:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if("function"==typeof t&&n.length>0)!function(){var o=u(t);n.forEach(function(t){var n=o(t);e.on(t,n)})}();else if("object"===("undefined"==typeof t?"undefined":o(t)))for(var r in t)this.on(r,t[r])},broadcast:function(){this.emit.apply(this,arguments)},on:function(t,e){s.on(t,e)},off:function(t,e){s.off(t,e)}},s);t.exports={emitterAPI:c,emitter:s}},function(t,e,n){"use strict";var o=n(1),r=o.getQueryVariable,i=r("debug")||r("debugger"),u=i?console:function(){},s=u.log=i?console.log:function(){};t.exports={logger:u,log:s,debugMode:i}},function(t,e,n){"use strict";var o=n(1),r=n(16),i=new r({debugger:d,initCompleted:!1,moduleSelector:"[data-module]"}),u=n(15),s=n(3),c=(s.API,s.emitterAPI),a=n(4),f=a.logger,l=a.log,d=a.debugMode,g={globalConfig:i,get stacks(){return this.globalConfig.stack||{}},set stacks(t){this.globalConfig.stack=t},get config(){return this.globalConfig.config},set config(t){this.globalConfig.set(t)},init:function(t){this.globalConfig.set(t)},logger:f,getElements:function(){return document.querySelectorAll(this.config.moduleSelector)},addModule:function(t,e){i.addToStack("modules")(t,e)},addService:function(t,e){i.addToStack("services")(t,e)},addAction:function(t,e){i.addToStack("actions")(t,e)},getModuleName:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=e.replace(/[\[\]]/g,"");return t?t&&t.attributes&&t.attributes[n]&&t.attributes[n].value:t},getModule:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=this.stacks.modules;return e&&e.get(t)},startAll:function(){var t=this.stacks.moduleRefs;t.forEach(function(t){t&&t.fn&&t.fn.init&&t.fn.init(),l(t,"init")})},getService:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=this.stacks.services,n=e&&e.get(t),o=void 0;if(n){if("api"in n)return l("Got ",n.name," already"),n.api;var r=n.name,i=this.stacks.serviceInit;if(i.length>5)return void l("too deep");var u=i.has(r);return u?void l("Found a circular ref!",r):(l("No circular refs",r),this.stacks={type:"serviceInit",name:r},o=n.fn(this),this.globalConfig.removeStackItem("serviceInit",r),l(this.stacks.serviceInit),Object.assign(n,{api:o}),o)}},getGlobal:function(t){return"undefined"==typeof window[t]?null:window[t]},getAction:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=this.stacks.actions;return e&&e.get(t)},asSubModule:function(){},runStart:function(){this.setupModules(),this.startAll()},startModules:function(t){var e=this;t?this.on(t,function(){e.runStart()}):this.runStart()},reset:function(){this.getGlobal.reset()},setupModules:function(){var t=this;if(this.config.initCompleted)return void l("Global Init already done - exit!");var e=this.getElements();e.forEach(function(e){var n=t.getModuleName(e,t.config.moduleSelector);if(n){var r=t.getModule(n),i=new u(e,t,o);if(r&&r.fn){var s=void 0;try{s=r.fn(i)}catch(t){l("Could not start "+n+" on "+i+": "+t)}if("undefined"!=typeof s){s.onmessage&&c.onmessage(s.onmessage,s.messages);var a=s.actions||s.behaviors||[];a&&a.length>0&&a.forEach(function(e){var n=t.getAction(e);if(n&&n.fn)try{var o=n.fn(i);l(o)}catch(t){l("could not start behavior "+e+": "+t)}}),t.stacks={type:"moduleRefs",name:n,fn:s}}}}}),this.config={initCompleted:!0}}};Object.assign(g,c),t.exports=g},function(t,e,n){"use strict";function o(t){function e(e){var n=e.toLowerCase();return t[n]||(t[n]=[])}return t=t||{},{on:function(t,n){e(t).push(n)},off:function(t,n){var o=e(t),r=o.indexOf(n);~r&&o.splice(r,1)},emit:function(t,n){e("*").concat(e(t)).forEach(function(t){t(n)})}}}t.exports=o},function(t,e,n){"use strict";t.exports=n(10)},function(t,e,n){"use strict";function o(t){var e="",n=Math.floor(.001*(Date.now()-c));return n===i?r++:(r=0,i=n),e+=u(s.lookup,a),e+=u(s.lookup,t),r>0&&(e+=u(s.lookup,r)),e+=u(s.lookup,n)}var r,i,u=n(2),s=n(0),c=1459707606518,a=6;t.exports=o},function(t,e,n){"use strict";function o(t){var e=r.shuffled();return{version:15&e.indexOf(t.substr(0,1)),worker:15&e.indexOf(t.substr(1,1))}}var r=n(0);t.exports=o},function(t,e,n){"use strict";function o(e){return s.seed(e),t.exports}function r(e){return l=e,t.exports}function i(t){return void 0!==t&&s.characters(t),s.shuffled()}function u(){return a(l)}var s=n(0),c=(n(2),n(9)),a=n(8),f=n(11),l=n(14)||0;t.exports=u,t.exports.generate=u,t.exports.seed=o,t.exports.worker=r,t.exports.characters=i,t.exports.decode=c,t.exports.isValid=f},function(t,e,n){"use strict";function o(t){if(!t||"string"!=typeof t||t.length<6)return!1;for(var e=r.characters(),n=t.length,o=0;o<n;o++)if(e.indexOf(t[o])===-1)return!1;return!0}var r=n(0);t.exports=o},function(t,e,n){"use strict";function o(){if(!i||!i.getRandomValues)return 48&Math.floor(256*Math.random());var t=new Uint8Array(1);return i.getRandomValues(t),48&t[0]}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i="object"===("undefined"==typeof window?"undefined":r(window))&&(window.crypto||window.msCrypto);t.exports=o},function(t,e,n){"use strict";function o(){return i=(9301*i+49297)%233280,i/233280}function r(t){i=t}var i=1;t.exports={nextValue:o,seed:r}},function(t,e,n){"use strict";t.exports=0},function(t,e,n){"use strict";function o(t,e,n){var o=t.id||"",r=n.shortid.generate(),i=o||r;this.el=this.elem=t,this._id=i,this.el.id="module-"+this._id,this.status="created",this.getService=e.getService.bind(e),this.getSubModule=e.asSubModule.bind(e),this.getGlobal=e.getGlobal.bind(e)}var r=n(3),i=r.emitterAPI,u=n(4);u.logger,u.debugMode;o.prototype=Object.assign(o.prototype,i,{getElement:function(){return this.el},destroy:function(){this.el=null,this.status=null}}),t.exports=o},function(t,e,n){"use strict";function o(){return Object.assign({},{config:{},stack:{services:new Map,serviceInit:new Map,modules:new Map,actions:new Map,moduleRefs:new Map,plugins:new Map}})}function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(t)return Object.assign(a.config,t)}function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return a[t]||{}}function u(){function t(t){r(t)}function e(t,e,n){var o=a.stack;t in o&&o[t].set(e,{type:t,name:e,fn:n})}function n(t){return c(e)(t)}function u(t,e){var n=a.stack;t in n&&n[t].delete(e)}function s(t){a.stack&&a.stack[t]&&a.stack[t].clear()}var f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t(f),{set:t,reset:o,addToStack:n,removeStackItem:u,clearStack:s,set config(t){this.set(t)},get config(){return i("config")},set stack(t){var n=t.type,o=t.name,r=t.fn;e(n,o,r)},get stack(){var t=a.stack;return t}}}var s=n(1),c=s.basic_curry,a=o();t.exports=u},function(t,e,n){"use strict";var o=n(5),r=void 0,i=Object.assign(o,{noConflict:function(){return window.EXMS=r,this}});window.EXMS&&(r=window.EXMS),t.exports=i}])});